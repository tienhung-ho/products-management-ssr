extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
    h1(class="mb-4") Danh mục sản phẩm

    +alert-error(5000)
    +alert-success(5000)

    .card.mb-3
      .card-header Danh sách
      .card-body
        .row
          .col-8
          .col-4.text-end
            a(
            href=`/${prefixAdmin}/product-category/create`
            class="btn btn-outline-success mb-20"
            ) + Thêm mới

        table(
          class="table table-hover table-sm"
        )
          thead
            tr(class="mid-pos")
              th STT 
              th Hình ảnh
              th Tiêu đề
              th Vị trí
              th Trạng thái
              th Hành động 

            tbody
              if(records.length)
                  each item, index in records
                      tr
                          //- td 
                          //-     input(
                          //-         type="checkbox"
                          //-         name="id"
                          //-         value=item.id
                          //-     )
                          td #{index + 1} 
                          td 
                              img(
                                  src=item.thumbnail
                                  alt=item.title 
                                  width="100px"
                                  height="auto"
                              ) 
                          td #{item.title} 
                          td 
                            input(
                                  type="number"
                                  name="position"
                                  value=item.position
                                  style="width: 60px"
                                  min="1"
                                )
                          //- td 
                          //-     input(
                          //-         type="number"
                          //-         name="position"
                          //-         value=item.position
                          //-         style="width: 60px"
                          //-         min="1"
                          //-     )
                          td 
                              if item.status == 'active'
                                  button(
                                      class="btn btn-sm btn-success"
                                      button-change-status
                                      data-status=item.status
                                      data-id=item.id
                                  ) Hoạt động 
                              else 
                                  button(
                                      class="btn btn-sm btn-danger"
                                      button-change-status
                                      data-status=item.status
                                      data-id=item.id
                                  ) Dừng hoạt động
                          td 
                              a(
                                  href=`/${prefixAdmin}/product/details/${item.id}`
                                  class="btn btn-secondary btn-sm me-1"
                              ) Chi tiết
                              a(
                                  href=`/${prefixAdmin}/product/edit/${item.id}`
                                  class="btn btn-warning btn-sm"
                              ) Sửa
                              button(
                                  class="btn btn-danger btn-sm ms-1"
                                  delete-button
                                  data-id=item.id
                              ) Xóa
              else 
                  tr 
                      td(
                          colspan="8"
                      ) 
                          div(
                              class="text-center"
                          ) Không tìm thấy sản phẩm nào

            form(
              id='form-change-status'
              method='POST'
              action=''
              data-path=`/${adminPrefix}/products-category/change-status`
            )

            form(
              id='form-delete-item'
              method='POST'
              action=''
              data-path=`/${adminPrefix}/products-category/delete`
            )
